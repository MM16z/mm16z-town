{"ast":null,"code":"import _slicedToArray from\"C:/Users/min55/Desktop/Project Folders/REACT/MM16z-Works/MM16z-MM16zTOWN/client/mm16z-town/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../../assets/sass/sass-components/login-page/login-page.scss\";import React,{useEffect,useRef,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Axios from\"axios\";import BackgroundContainer from\"../container-components/background-container\";import NavbarContainer from\"../container-components/navbar-container\";import hasJWT from\"../../auth/hasJWT\";import getUserauth from\"../../auth/getUserauth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var emailRef=useRef();var navigate=useNavigate();var routeAuth=function routeAuth(){if(hasJWT()){if(getUserauth().then(function(result){if(result.data.status===\"error\"){localStorage.clear();window.location=\"/\";}else{navigate(\"/user/panel\");}}));alert(\"already login\");alert(\"dont broke my Pepehands code :(\");}};// const handleSubmit = (e) => {\n//   e.preventDefault();\n//   Axios.post(\n//     \"http://localhost:3001/login\",\n//     JSON.stringify({ email: email, password: password }),\n//     {\n//       headers: { \"Content-Type\": \"application/json\" },\n//     }\n//   );\n//   Axios.interceptors.response.use(\n//     function (response) {\n//       if (response.data.status === \"ok\") {\n//         alert(\"Login success\");\n//         localStorage.setItem(\"token\", response.data.token);\n//         window.location = \"/user/panel\";\n//       } else {\n//         alert(\"login failed\");\n//       }\n//     },\n//     function (error) {\n//       return Promise.reject(error);\n//     }\n//   );\n//   setEmail(\"\");\n//   setPassword(\"\");\n// };\nvar handleSubmit=function handleSubmit(e){e.preventDefault();var Jsondata={email:email,password:password};fetch(\"http://localhost:3001/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(Jsondata)}).then(function(response){return response.json();}).then(function(data){if(data.status===\"ok\"){alert(\"Login success\");localStorage.setItem(\"token\",data.token);window.location=\"/user/panel\";}else{alert(\"login failed\");}}).catch(function(error){console.log(\"Error\",error);});setEmail(\"\");setPassword(\"\");};useEffect(function(){routeAuth();emailRef.current.focus();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page-container\",children:[/*#__PURE__*/_jsx(NavbarContainer,{navCurrentPath:\"/Login\"}),/*#__PURE__*/_jsx(\"form\",{method:\"post\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-inputcontainer\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email-input\",children:\"Enter your email :D\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputborder\",id:\"email-input\",type:\"email\",ref:emailRef,onChange:function onChange(e){return setEmail(e.target.value);},value:email,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password-input\",children:\"Enter your password :V\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputborder\",id:\"password-input\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password,required:true}),/*#__PURE__*/_jsx(\"input\",{id:\"login-submitbtn\",type:\"submit\",value:\"Login\"})]})}),/*#__PURE__*/_jsx(BackgroundContainer,{})]});}export default LoginPage;","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","Axios","BackgroundContainer","NavbarContainer","hasJWT","getUserauth","LoginPage","email","setEmail","password","setPassword","emailRef","navigate","routeAuth","then","result","data","status","localStorage","clear","window","location","alert","handleSubmit","e","preventDefault","Jsondata","fetch","method","headers","body","JSON","stringify","response","json","setItem","token","catch","error","console","log","current","focus","target","value"],"sources":["C:/Users/min55/Desktop/Project Folders/REACT/MM16z-Works/MM16z-MM16zTOWN/client/mm16z-town/src/components/login-page-components/login-page.js"],"sourcesContent":["import \"../../assets/sass/sass-components/login-page/login-page.scss\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\n\r\nimport BackgroundContainer from \"../container-components/background-container\";\r\nimport NavbarContainer from \"../container-components/navbar-container\";\r\nimport hasJWT from \"../../auth/hasJWT\";\r\nimport getUserauth from \"../../auth/getUserauth\";\r\n\r\nfunction LoginPage() {\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n\r\n  const emailRef = useRef();\r\n\r\n  let navigate = useNavigate();\r\n\r\n  const routeAuth = () => {\r\n    if (hasJWT()) {\r\n      if (\r\n        getUserauth().then((result) => {\r\n          if (result.data.status === \"error\") {\r\n            localStorage.clear();\r\n            window.location = \"/\";\r\n          } else {\r\n            navigate(\"/user/panel\");\r\n          }\r\n        })\r\n      );\r\n      alert(\"already login\");\r\n      alert(\"dont broke my Pepehands code :(\");\r\n    }\r\n  };\r\n\r\n  // const handleSubmit = (e) => {\r\n  //   e.preventDefault();\r\n  //   Axios.post(\r\n  //     \"http://localhost:3001/login\",\r\n  //     JSON.stringify({ email: email, password: password }),\r\n  //     {\r\n  //       headers: { \"Content-Type\": \"application/json\" },\r\n  //     }\r\n  //   );\r\n  //   Axios.interceptors.response.use(\r\n  //     function (response) {\r\n  //       if (response.data.status === \"ok\") {\r\n  //         alert(\"Login success\");\r\n  //         localStorage.setItem(\"token\", response.data.token);\r\n  //         window.location = \"/user/panel\";\r\n  //       } else {\r\n  //         alert(\"login failed\");\r\n  //       }\r\n  //     },\r\n  //     function (error) {\r\n  //       return Promise.reject(error);\r\n  //     }\r\n  //   );\r\n  //   setEmail(\"\");\r\n  //   setPassword(\"\");\r\n  // };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const Jsondata = {\r\n      email: email,\r\n      password: password,\r\n    };\r\n    fetch(\"http://localhost:3001/login\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(Jsondata),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (data.status === \"ok\") {\r\n          alert(\"Login success\");\r\n          localStorage.setItem(\"token\", data.token);\r\n          window.location = \"/user/panel\";\r\n        } else {\r\n          alert(\"login failed\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error\", error);\r\n      });\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    routeAuth();\r\n    emailRef.current.focus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"login-page-container\">\r\n      <NavbarContainer navCurrentPath=\"/Login\" />\r\n      <form method=\"post\" onSubmit={handleSubmit}>\r\n        <div className=\"login-inputcontainer\">\r\n          <label htmlFor=\"email-input\">Enter your email :D</label>\r\n          <input\r\n            className=\"inputborder\"\r\n            id=\"email-input\"\r\n            type=\"email\"\r\n            ref={emailRef}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n            required\r\n          ></input>\r\n          <label htmlFor=\"password-input\">Enter your password :V</label>\r\n          <input\r\n            className=\"inputborder\"\r\n            id=\"password-input\"\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n            required\r\n          ></input>\r\n          <input id=\"login-submitbtn\" type=\"submit\" value=\"Login\"></input>\r\n        </div>\r\n      </form>\r\n      <BackgroundContainer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}