{"ast":null,"code":"import _slicedToArray from\"C:/Users/min55/Desktop/Project Folders/REACT/MM16z-Works/MM16z-MM16zTOWN/client/mm16z-town/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../../assets/sass/sass-components/register-page/register-page.scss\";import React,{useRef,useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import NavbarContainer from\"../container-components/navbar-container\";import BackgroundContainer from\"../container-components/background-container\";import hasJWT from\"../../auth/hasJWT\";import getUserauth from\"../../auth/getUserauth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterPage(){var emailRef=useRef();var usernameRef=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var navigate=useNavigate();var routeAuth=function routeAuth(){if(hasJWT()){if(getUserauth().then(function(result){if(result.data.status===\"error\"){localStorage.clear();window.location=\"/\";}else{navigate(\"/user/panel\");}}));alert(\"already login\");alert(\"dont broke my Pepehands code :(\");}};var handleSubmit=function handleSubmit(e){e.preventDefault();var Jsondata={username:username,email:email,password:password};fetch(\"http://localhost:3001/register\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(Jsondata)}).then(function(response){return response.json();}).then(function(data){if(data.status===\"ok\"){alert(\"Register Success\");window.location=\"/\";}else{alert(\"Register failed\");}}).catch(function(error){console.log(\"Error\",error);});setUsername(\"\");setEmail(\"\");setPassword(\"\");setSuccess(true);};useEffect(function(){routeAuth();emailRef.current.focus();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"register-page-container\",children:[/*#__PURE__*/_jsx(NavbarContainer,{navCurrentPath:\"/Register\"}),/*#__PURE__*/_jsx(\"form\",{method:\"post\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"register-inputcontainer\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email-input\",children:\"Enter your email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputborder\",id:\"email-input\",type:\"email\",ref:emailRef,onChange:function onChange(e){return setEmail(e.target.value);},value:email,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password-input\",children:\"Enter your password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputborder\",id:\"password-input\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username-input\",id:\"username-input-label\",children:\"Enter your Username\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputborder\",id:\"username-input\",type:\"text\",ref:usernameRef,onChange:function onChange(e){return setUsername(e.target.value);},value:username,required:true}),/*#__PURE__*/_jsx(\"input\",{id:\"register-submitbtn\",type:\"submit\",value:\"Register\"})]})}),/*#__PURE__*/_jsx(BackgroundContainer,{})]});}export default RegisterPage;","map":{"version":3,"names":["React","useRef","useState","useEffect","useNavigate","NavbarContainer","BackgroundContainer","hasJWT","getUserauth","RegisterPage","emailRef","usernameRef","username","setUsername","email","setEmail","password","setPassword","success","setSuccess","navigate","routeAuth","then","result","data","status","localStorage","clear","window","location","alert","handleSubmit","e","preventDefault","Jsondata","fetch","method","headers","body","JSON","stringify","response","json","catch","error","console","log","current","focus","target","value"],"sources":["C:/Users/min55/Desktop/Project Folders/REACT/MM16z-Works/MM16z-MM16zTOWN/client/mm16z-town/src/components/register-page-components/register-page.js"],"sourcesContent":["import \"../../assets/sass/sass-components/register-page/register-page.scss\";\r\n\r\nimport React, { useRef, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport NavbarContainer from \"../container-components/navbar-container\";\r\nimport BackgroundContainer from \"../container-components/background-container\";\r\n\r\nimport hasJWT from \"../../auth/hasJWT\";\r\nimport getUserauth from \"../../auth/getUserauth\";\r\n\r\nfunction RegisterPage() {\r\n  const emailRef = useRef();\r\n  const usernameRef = useRef();\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  let navigate = useNavigate();\r\n\r\n  const routeAuth = () => {\r\n    if (hasJWT()) {\r\n      if (\r\n        getUserauth().then((result) => {\r\n          if (result.data.status === \"error\") {\r\n            localStorage.clear();\r\n            window.location = \"/\";\r\n          } else {\r\n            navigate(\"/user/panel\");\r\n          }\r\n        })\r\n      );\r\n      alert(\"already login\");\r\n      alert(\"dont broke my Pepehands code :(\");\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const Jsondata = {\r\n      username: username,\r\n      email: email,\r\n      password: password,\r\n    };\r\n    fetch(\"http://localhost:3001/register\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(Jsondata),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (data.status === \"ok\") {\r\n          alert(\"Register Success\");\r\n          window.location = \"/\";\r\n        } else {\r\n          alert(\"Register failed\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error\", error);\r\n      });\r\n    setUsername(\"\");\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n    setSuccess(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    routeAuth();\r\n    emailRef.current.focus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"register-page-container\">\r\n      <NavbarContainer navCurrentPath=\"/Register\" />\r\n      <form method=\"post\" onSubmit={handleSubmit}>\r\n        <div className=\"register-inputcontainer\">\r\n          <label htmlFor=\"email-input\">Enter your email</label>\r\n          <input\r\n            className=\"inputborder\"\r\n            id=\"email-input\"\r\n            type=\"email\"\r\n            ref={emailRef}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n            required\r\n          ></input>\r\n          <label htmlFor=\"password-input\">Enter your password</label>\r\n          <input\r\n            className=\"inputborder\"\r\n            id=\"password-input\"\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n            required\r\n          ></input>\r\n          <label htmlFor=\"username-input\" id=\"username-input-label\">\r\n            Enter your Username\r\n          </label>\r\n          <input\r\n            className=\"inputborder\"\r\n            id=\"username-input\"\r\n            type=\"text\"\r\n            ref={usernameRef}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            value={username}\r\n            required\r\n          ></input>\r\n          <input id=\"register-submitbtn\" type=\"submit\" value=\"Register\"></input>\r\n        </div>\r\n      </form>\r\n      <BackgroundContainer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegisterPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}